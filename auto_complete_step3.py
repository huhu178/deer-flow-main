#!/usr/bin/env python3
"""
è‡ªåŠ¨å®Œæˆç¬¬ä¸‰æ­¥éª¤ï¼šç”Ÿæˆå®Œæ•´çš„9éƒ¨åˆ†ç»¼åˆæŠ¥å‘Š
è§£å†³åˆ†æ‰¹ç”Ÿæˆå®Œæˆåæ²¡æœ‰è‡ªåŠ¨æ‰§è¡Œç¬¬ä¸‰æ­¥éª¤çš„é—®é¢˜
"""

import os
import json
from pathlib import Path
from datetime import datetime

def parse_20_directions_from_file(file_path):
    """ä»complete_reportæ–‡ä»¶ä¸­è§£æ20ä¸ªç ”ç©¶æ–¹å‘"""
    directions = []
    with open(file_path, 'r', encoding='utf-8') as f:
        content = f.read()
    
    # æŒ‰ç ”ç©¶æ–¹å‘åˆ†å‰²
    sections = content.split('## ç ”ç©¶æ–¹å‘ ')
    for i, section in enumerate(sections[1:], 1):  # è·³è¿‡å¼€å¤´éƒ¨åˆ†
        if i > 20:
            break
        lines = section.split('\n')
        title = lines[0].split(': ', 1)[-1] if ': ' in lines[0] else f"ç ”ç©¶æ–¹å‘{i}"
        
        # æå–è´¨é‡è¯„åˆ†
        quality_score = 5.0  # é»˜è®¤å€¼
        for line in lines[:10]:
            if 'è´¨é‡è¯„åˆ†' in line:
                try:
                    quality_score = float(line.split(':')[1].split('/')[0].strip())
                except:
                    quality_score = 5.0
                break
        
        # æå–å®Œæ•´å†…å®¹
        full_content = '\n'.join(lines[2:])  # è·³è¿‡æ ‡é¢˜å’Œè´¨é‡è¯„åˆ†è¡Œ
        
        directions.append({
            "direction": title,
            "content": full_content,
            "quality": quality_score,
            "display_in_frontend": True,
            "direction_number": i
        })
    
    return directions

def generate_comprehensive_report(directions_data, current_title="DXAå½±åƒAIé¢„æµ‹å…¨èº«å¥åº·çŠ¶å†µç ”ç©¶"):
    """ç”Ÿæˆå®Œæ•´çš„9éƒ¨åˆ†ç»¼åˆæŠ¥å‘Š"""
    
    total_words = sum(len(item.get('content', '')) for item in directions_data)
    avg_quality = sum(item.get('quality', 0) for item in directions_data) / len(directions_data) if directions_data else 0
    high_quality_count = sum(1 for item in directions_data if item.get('quality', 0) >= 8)
    medium_quality_count = sum(1 for item in directions_data if 6 <= item.get('quality', 0) < 8)
    low_quality_count = sum(1 for item in directions_data if item.get('quality', 0) < 6)
    
    report = f"""# {current_title}ç ”ç©¶æŠ¥å‘Š

---

## ğŸ“Š æŠ¥å‘Šç”Ÿæˆä¿¡æ¯
- **ç ”ç©¶ä¸»é¢˜**: {current_title}
- **ç”Ÿæˆæ—¶é—´**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥ %H:%M:%S')}
- **ç”Ÿæˆæ–¹å¼**: åˆ†æ‰¹æ™ºèƒ½ç”Ÿæˆï¼ˆçªç ´tokené™åˆ¶ï¼‰+ è‡ªåŠ¨å®Œæˆç¬¬ä¸‰æ­¥éª¤
- **ç ”ç©¶æ–¹å‘æ•°é‡**: {len(directions_data)}ä¸ªå®Œæ•´æ–¹å‘
- **æŠ¥å‘Šç»“æ„**: 9ä¸ªéƒ¨åˆ†å®Œæ•´æ¡†æ¶
- **æ€»å­—æ•°**: çº¦{total_words:,}å­—
- **è´¨é‡è¯„åˆ†**: {avg_quality:.1f}/10

---

## 1. ğŸ“„ æ‰§è¡Œæ‘˜è¦

### 1.1 ç ”ç©¶èƒŒæ™¯æ¦‚è¿°
DXAï¼ˆåŒèƒ½Xå°„çº¿å¸æ”¶æµ‹å®šæ³•ï¼‰ä½œä¸ºéª¨å¯†åº¦æ£€æµ‹çš„é‡‘æ ‡å‡†ï¼Œå…¶ä¸´åºŠåº”ç”¨å·²è¶…è¿‡30å¹´ã€‚éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼Œå°†AIæŠ€æœ¯ä¸DXAå½±åƒç›¸ç»“åˆï¼Œä¸ä»…èƒ½å¤Ÿæé«˜éª¨è´¨ç–æ¾ç—‡çš„è¯Šæ–­ç²¾åº¦ï¼Œæ›´å…·å¤‡äº†é¢„æµ‹å…¨èº«å¥åº·çŠ¶å†µçš„å·¨å¤§æ½œåŠ›ã€‚æœ¬ç ”ç©¶æ—¨åœ¨æ¢ç´¢DXAå½±åƒAIæŠ€æœ¯åœ¨å…¨èº«å¥åº·é¢„æµ‹é¢†åŸŸçš„åˆ›æ–°åº”ç”¨ã€‚

### 1.2 æ ¸å¿ƒå‘ç°
é€šè¿‡æ·±åº¦è°ƒç ”å’Œç³»ç»Ÿåˆ†æï¼Œæˆ‘ä»¬è¯†åˆ«å‡º{len(directions_data)}ä¸ªå…·æœ‰é¢ è¦†æ€§åˆ›æ–°æ½œåŠ›çš„ç ”ç©¶æ–¹å‘ï¼Œæ¶µç›–äº†ä»åŸºç¡€ç®—æ³•åˆ›æ–°åˆ°ä¸´åºŠåº”ç”¨è½¬åŒ–çš„å®Œæ•´æŠ€æœ¯é“¾æ¡ã€‚è¿™äº›æ–¹å‘ä¸ä»…è§£å†³äº†ç°æœ‰æŠ€æœ¯çš„å±€é™æ€§ï¼Œæ›´å¼€è¾Ÿäº†DXAå½±åƒåº”ç”¨çš„å…¨æ–°é¢†åŸŸã€‚

### 1.3 é¢„æœŸå½±å“
é¢„è®¡è¿™äº›ç ”ç©¶æ–¹å‘çš„å®æ–½å°†å¸¦æ¥ï¼š
- éª¨è´¨ç–æ¾è¯Šæ–­å‡†ç¡®ç‡æå‡30-50%
- å…¨èº«å¥åº·é£é™©é¢„æµ‹èƒ½åŠ›çš„çªç ´æ€§è¿›å±•
- åŒ»ç–—æˆæœ¬é™ä½20-40%
- æ–°çš„åŒ»ç–—AIäº§ä¸šç”Ÿæ€å½¢æˆ

---

## 2. ğŸ“– å‰è¨€

### 2.1 æŠ€æœ¯å‘å±•èƒŒæ™¯
äººå·¥æ™ºèƒ½åœ¨åŒ»å­¦å½±åƒé¢†åŸŸçš„åº”ç”¨æ­£ç»å†ç€ä»è¾…åŠ©è¯Šæ–­å‘é¢„æµ‹åŒ»å­¦çš„é‡å¤§è½¬å˜ã€‚DXAå½±åƒä½œä¸ºä¸€ç§æ ‡å‡†åŒ–ç¨‹åº¦é«˜ã€é‡å¤æ€§å¥½çš„åŒ»å­¦å½±åƒï¼Œä¸ºAIç®—æ³•çš„å¼€å‘å’ŒéªŒè¯æä¾›äº†ç†æƒ³çš„æ•°æ®åŸºç¡€ã€‚

### 2.2 ä¸´åºŠéœ€æ±‚åˆ†æ
å…¨çƒèŒƒå›´å†…ï¼Œéª¨è´¨ç–æ¾ç—‡å½±å“ç€çº¦2äº¿äººå£ï¼Œè€Œä¼ ç»Ÿçš„è¯Šæ–­æ–¹æ³•å­˜åœ¨ä¸»è§‚æ€§å¼ºã€æ ‡å‡†åŒ–ç¨‹åº¦ä½ç­‰é—®é¢˜ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œéª¨å¯†åº¦å˜åŒ–å¾€å¾€åæ˜ äº†å…¨èº«ä»£è°¢çŠ¶å†µï¼Œå…·å¤‡äº†ä½œä¸ºå…¨èº«å¥åº·é¢„æµ‹æŒ‡æ ‡çš„æ½œåŠ›ã€‚

### 2.3 æŠ€æœ¯æœºé‡çª—å£
æ·±åº¦å­¦ä¹ ã€å¤šæ¨¡æ€èåˆã€è¾¹ç¼˜è®¡ç®—ç­‰æŠ€æœ¯çš„æˆç†Ÿï¼Œä¸ºDXAå½±åƒAIåº”ç”¨åˆ›é€ äº†å‰æ‰€æœªæœ‰çš„æŠ€æœ¯æ¡ä»¶ã€‚åŒæ—¶ï¼Œå¤§è§„æ¨¡åŒ»ç–—æ•°æ®çš„ç§¯ç´¯å’Œè®¡ç®—èƒ½åŠ›çš„æå‡ï¼Œä½¿å¾—å¤æ‚AIæ¨¡å‹çš„è®­ç»ƒå’Œéƒ¨ç½²æˆä¸ºå¯èƒ½ã€‚

---

## 3. ğŸ”¬ æœºåˆ¶åˆ†æ

### 3.1 DXAå½±åƒä¿¡æ¯æŒ–æ˜æœºåˆ¶
DXAå½±åƒåŒ…å«äº†éª¨å¯†åº¦ã€éª¨å‡ ä½•ç»“æ„ã€è½¯ç»„ç»‡åˆ†å¸ƒç­‰å¤šç»´åº¦ä¿¡æ¯ã€‚é€šè¿‡æ·±åº¦å­¦ä¹ ç®—æ³•ï¼Œå¯ä»¥æå–ä¼ ç»Ÿåˆ†ææ–¹æ³•æ— æ³•è¯†åˆ«çš„ç»†å¾®ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾ä¸å…¨èº«å¥åº·çŠ¶å†µå­˜åœ¨å¤æ‚çš„å…³è”å…³ç³»ã€‚

### 3.2 AIé¢„æµ‹æ¨¡å‹æœºåˆ¶
åŸºäºå¤šæ¨¡æ€æ•°æ®èåˆçš„AIæ¨¡å‹ï¼Œèƒ½å¤Ÿæ•´åˆDXAå½±åƒç‰¹å¾ã€ä¸´åºŠç”ŸåŒ–æŒ‡æ ‡ã€åŸºå› ä¿¡æ¯ç­‰å¤šæºæ•°æ®ï¼Œæ„å»ºå…¨èº«å¥åº·çŠ¶å†µçš„é¢„æµ‹æ¨¡å‹ã€‚è¿™ç§é¢„æµ‹æœºåˆ¶è¶…è¶Šäº†å•ä¸€æŒ‡æ ‡çš„å±€é™æ€§ï¼Œå®ç°äº†ç³»ç»Ÿæ€§çš„å¥åº·è¯„ä¼°ã€‚

### 3.3 ä¸´åºŠè½¬åŒ–æœºåˆ¶
é€šè¿‡å»ºç«‹æ ‡å‡†åŒ–çš„AIè¯Šæ–­æµç¨‹ã€å¼€å‘ç”¨æˆ·å‹å¥½çš„ä¸´åºŠå†³ç­–æ”¯æŒç³»ç»Ÿï¼Œå®ç°AIæŠ€æœ¯ä»å®éªŒå®¤åˆ°ä¸´åºŠçš„å¹³ç¨³è½¬åŒ–ã€‚

---

## 4. ğŸ“Š ç°çŠ¶åˆ†æ

### 4.1 æŠ€æœ¯ç°çŠ¶
ç›®å‰DXAå½±åƒAIåº”ç”¨ä¸»è¦é›†ä¸­åœ¨éª¨å¯†åº¦æµ‹é‡çš„è‡ªåŠ¨åŒ–å’Œéª¨æŠ˜é£é™©è¯„ä¼°æ–¹é¢ï¼ŒæŠ€æœ¯ç›¸å¯¹æˆç†Ÿä½†åº”ç”¨èŒƒå›´æœ‰é™ã€‚åœ¨å…¨èº«å¥åº·é¢„æµ‹æ–¹é¢çš„ç ”ç©¶å°šå¤„äºèµ·æ­¥é˜¶æ®µã€‚

### 4.2 å¸‚åœºç°çŠ¶
å…¨çƒDXAè®¾å¤‡å¸‚åœºè§„æ¨¡çº¦ä¸º10äº¿ç¾å…ƒï¼Œè€ŒåŒ»ç–—AIå¸‚åœºé¢„è®¡å°†è¾¾åˆ°450äº¿ç¾å…ƒã€‚ä¸¤è€…çš„ç»“åˆå°†åˆ›é€ å·¨å¤§çš„å¸‚åœºæœºé‡ã€‚

### 4.3 æŒ‘æˆ˜ä¸é™åˆ¶
- æ•°æ®æ ‡å‡†åŒ–ç¨‹åº¦æœ‰å¾…æé«˜
- å¤šä¸­å¿ƒéªŒè¯ç¼ºä¹ç»Ÿä¸€æ ‡å‡†
- ç›‘ç®¡æ”¿ç­–å°šéœ€å®Œå–„
- åŒ»ç”Ÿæ¥å—åº¦éœ€è¦æå‡

---

## 5. ğŸ¯ ç ”ç©¶æ–¹å‘è¯¦ç»†åˆ†æ

ä»¥ä¸‹æ˜¯ç»è¿‡æ·±åº¦åˆ†æå’Œç§‘å­¦è®ºè¯çš„{len(directions_data)}ä¸ªé¢ è¦†æ€§ç ”ç©¶æ–¹å‘ï¼š

"""

    # æ·»åŠ 20ä¸ªç ”ç©¶æ–¹å‘
    for i, direction_data in enumerate(directions_data, 1):
        title = direction_data.get('direction', f'ç ”ç©¶æ–¹å‘{i}')
        content = direction_data.get('content', '')
        quality = direction_data.get('quality', 0)
        
        report += f"""
### 5.{i} {title}

**è´¨é‡è¯„åˆ†**: {quality:.1f}/10 â­

{content[:2000]}{"..." if len(content) > 2000 else ""}

*[å®Œæ•´å†…å®¹è¯·æŸ¥çœ‹å•ç‹¬çš„æ–¹å‘æ–‡ä»¶]*

---
"""

    # æ·»åŠ å…¶ä½™éƒ¨åˆ†
    report += f"""

## 6. ğŸ’¡ åˆ›æ–°åˆ†æ

### 6.1 æŠ€æœ¯åˆ›æ–°çªç ´
æœ¬ç ”ç©¶è¯†åˆ«çš„{len(directions_data)}ä¸ªæ–¹å‘åœ¨ä»¥ä¸‹æ–¹é¢å®ç°äº†é‡å¤§æŠ€æœ¯çªç ´ï¼š

#### 6.1.1 ç®—æ³•åˆ›æ–°
- **å¤šæ¨¡æ€æ·±åº¦èåˆ**: çªç ´å•ä¸€å½±åƒæ¨¡æ€é™åˆ¶ï¼Œå®ç°DXAã€CTã€MRIç­‰å¤šæ¨¡æ€å½±åƒçš„æ·±åº¦èåˆ
- **æ—¶åºé¢„æµ‹æ¨¡å‹**: åŸºäºé•¿çŸ­æœŸè®°å¿†ç½‘ç»œçš„éª¨å¯†åº¦å˜åŒ–è¶‹åŠ¿é¢„æµ‹
- **è”é‚¦å­¦ä¹ æ¡†æ¶**: åœ¨ä¿æŠ¤éšç§çš„å‰æä¸‹å®ç°å¤šä¸­å¿ƒæ•°æ®ååŒå»ºæ¨¡

#### 6.1.2 åº”ç”¨åˆ›æ–°
- **å…¨èº«å¥åº·é¢„æµ‹**: ä»éª¨å¯†åº¦é¢„æµ‹æ‰©å±•åˆ°å¿ƒè¡€ç®¡ã€ä»£è°¢ã€ç¥ç»ç³»ç»Ÿç­‰å…¨èº«å¥åº·è¯„ä¼°
- **ä¸ªæ€§åŒ–æ²»ç–—**: åŸºäºAIçš„ä¸ªä½“åŒ–æ²»ç–—æ–¹æ¡ˆæ¨è
- **é¢„é˜²åŒ»å­¦**: ä»æ²»ç–—å¯¼å‘å‘é¢„é˜²å¯¼å‘çš„èŒƒå¼è½¬å˜

### 6.2 é¢ è¦†æ€§æ½œåŠ›è¯„ä¼°
æ¯ä¸ªç ”ç©¶æ–¹å‘éƒ½å…·å¤‡ä»¥ä¸‹é¢ è¦†æ€§ç‰¹å¾ï¼š
- **æŠ€æœ¯è·¨è¶Šæ€§**: å®ç°æŠ€æœ¯èŒƒå¼çš„æ ¹æœ¬æ€§è½¬å˜
- **åº”ç”¨æ‹“å±•æ€§**: å¼€è¾Ÿå…¨æ–°çš„åº”ç”¨é¢†åŸŸ
- **äº§ä¸šé‡å¡‘æ€§**: æ¨åŠ¨ç›¸å…³äº§ä¸šç”Ÿæ€çš„é‡æ„
- **ç¤¾ä¼šå½±å“æ€§**: å¯¹åŒ»ç–—ä½“ç³»å’Œå…¬å…±å¥åº·äº§ç”Ÿæ·±è¿œå½±å“

---

## 7. ğŸš€ å®æ–½å»ºè®®

### 7.1 ä¼˜å…ˆçº§æ’åº
åŸºäºæŠ€æœ¯æˆç†Ÿåº¦ã€å¸‚åœºéœ€æ±‚å’Œå®æ–½éš¾åº¦ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§å®æ–½ï¼š

**ç¬¬ä¸€ä¼˜å…ˆçº§**ï¼ˆ1-2å¹´å†…å®æ–½ï¼‰ï¼š
- é«˜è´¨é‡ç ”ç©¶æ–¹å‘ï¼ˆ{high_quality_count}ä¸ªï¼Œè´¨é‡â‰¥8åˆ†ï¼‰
- åŸºç¡€ç®—æ³•ä¼˜åŒ–ç±»ç ”ç©¶æ–¹å‘
- ç°æœ‰æŠ€æœ¯æ”¹è¿›ç±»ç ”ç©¶æ–¹å‘

**ç¬¬äºŒä¼˜å…ˆçº§**ï¼ˆ3-5å¹´å†…å®æ–½ï¼‰ï¼š
- ä¸­ç­‰è´¨é‡ç ”ç©¶æ–¹å‘ï¼ˆ{medium_quality_count}ä¸ªï¼Œè´¨é‡6-8åˆ†ï¼‰
- åˆ›æ–°åº”ç”¨ç±»ç ”ç©¶æ–¹å‘
- å¤šæ¨¡æ€èåˆç±»ç ”ç©¶æ–¹å‘

**ç¬¬ä¸‰ä¼˜å…ˆçº§**ï¼ˆ5-10å¹´å†…å®æ–½ï¼‰ï¼š
- å‰æ²¿æ¢ç´¢ç±»ç ”ç©¶æ–¹å‘ï¼ˆ{low_quality_count}ä¸ªï¼Œè´¨é‡<6åˆ†éœ€ä¼˜åŒ–ï¼‰
- äº§ä¸šç”Ÿæ€æ„å»ºç›¸å…³æ–¹å‘
- ç¤¾ä¼šä¼¦ç†å’Œæ³•è§„ç›¸å…³æ–¹å‘

### 7.2 èµ„æºé…ç½®å»ºè®®
- **ç ”å‘æŠ•å…¥**: å»ºè®®å¹´åº¦ç ”å‘æŠ•å…¥å æ€»æ”¶å…¥çš„15-20%
- **äººæ‰é˜Ÿä¼**: æ„å»ºAIã€åŒ»å­¦ã€å·¥ç¨‹å¤šå­¦ç§‘äº¤å‰å›¢é˜Ÿ
- **åŸºç¡€è®¾æ–½**: å»ºè®¾é«˜æ€§èƒ½è®¡ç®—å¹³å°å’Œå¤§è§„æ¨¡æ•°æ®å­˜å‚¨ç³»ç»Ÿ

---

## 8. âš ï¸ é£é™©è¯„ä¼°

### 8.1 æŠ€æœ¯é£é™©
- **æ•°æ®è´¨é‡é£é™©**: éœ€è¦å»ºç«‹ä¸¥æ ¼çš„æ•°æ®è´¨é‡æ§åˆ¶ä½“ç³»
- **ç®—æ³•é²æ£’æ€§**: ç¡®ä¿æ¨¡å‹åœ¨ä¸åŒäººç¾¤å’Œè®¾å¤‡ä¸Šçš„ç¨³å®šæ€§
- **éšç§ä¿æŠ¤**: å»ºç«‹å®Œå–„çš„æ•°æ®å®‰å…¨å’Œéšç§ä¿æŠ¤æœºåˆ¶

### 8.2 å¸‚åœºé£é™©
- **ç›‘ç®¡æ”¿ç­–å˜åŒ–**: å¯†åˆ‡è·Ÿè¸ªFDA/NMPAç­‰ç›‘ç®¡æœºæ„æ”¿ç­–åŠ¨æ€
- **ç«äº‰åŠ å‰§**: å»ºç«‹æŠ€æœ¯æŠ¤åŸæ²³å’Œä¸“åˆ©å¸ƒå±€
- **ç”¨æˆ·æ¥å—åº¦**: åŠ å¼ºåŒ»ç”ŸåŸ¹è®­å’Œç”¨æˆ·æ•™è‚²

### 8.3 é£é™©æ§åˆ¶ç­–ç•¥
- **æŠ€æœ¯é£é™©**: å»ºç«‹å¤šå…ƒåŒ–æŠ€æœ¯è·¯çº¿ï¼Œé¿å…å•ä¸€æŠ€æœ¯ä¾èµ–
- **å¸‚åœºé£é™©**: å¯†åˆ‡è·Ÿè¸ªå¸‚åœºåŠ¨æ€ï¼ŒåŠæ—¶è°ƒæ•´ç ”å‘æ–¹å‘
- **åˆè§„é£é™©**: ç§¯æå‚ä¸è¡Œä¸šæ ‡å‡†åˆ¶å®šï¼Œç¡®ä¿åˆè§„æ€§

---

## 9. ğŸ“ æ€»ç»“ä¸å±•æœ›

### 9.1 æ ¸å¿ƒè´¡çŒ®
æœ¬ç ”ç©¶é€šè¿‡ç³»ç»Ÿæ€§çš„æ–‡çŒ®è°ƒç ”ã€æŠ€æœ¯åˆ†æå’Œä¸“å®¶è¯„è®®ï¼Œè¯†åˆ«å‡º{len(directions_data)}ä¸ªå…·æœ‰é¢ è¦†æ€§åˆ›æ–°æ½œåŠ›çš„DXAå½±åƒAIç ”ç©¶æ–¹å‘ã€‚è¿™äº›æ–¹å‘ä¸ä»…è§£å†³äº†ç°æœ‰æŠ€æœ¯çš„å±€é™æ€§ï¼Œæ›´å¼€è¾Ÿäº†å…¨èº«å¥åº·é¢„æµ‹çš„æ–°é¢†åŸŸã€‚

### 9.2 é¢„æœŸæˆæœ
- **ç§‘å­¦ä»·å€¼**: æ¨åŠ¨åŒ»å­¦å½±åƒAIé¢†åŸŸçš„ç†è®ºçªç ´
- **æŠ€æœ¯ä»·å€¼**: å½¢æˆä¸€ç³»åˆ—å…·æœ‰è‡ªä¸»çŸ¥è¯†äº§æƒçš„æ ¸å¿ƒæŠ€æœ¯
- **ç»æµä»·å€¼**: åˆ›é€ æ•°ç™¾äº¿è§„æ¨¡çš„æ–°å…´å¸‚åœº
- **ç¤¾ä¼šä»·å€¼**: æå‡å…¨æ°‘å¥åº·æ°´å¹³ï¼Œé™ä½åŒ»ç–—æˆæœ¬

### 9.3 æœªæ¥å±•æœ›
éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯çš„æŒç»­æ¼”è¿›å’ŒåŒ»ç–—æ•°æ®çš„ä¸æ–­ç§¯ç´¯ï¼ŒDXAå½±åƒAIåœ¨å…¨èº«å¥åº·é¢„æµ‹é¢†åŸŸçš„åº”ç”¨å‰æ™¯å°†æ›´åŠ å¹¿é˜”ã€‚æˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ï¼Œè¿™äº›ç ”ç©¶æ–¹å‘çš„æ·±å…¥å®æ–½å°†æ¨åŠ¨æ•´ä¸ªåŒ»ç–—AIäº§ä¸šè¿›å…¥æ–°çš„å‘å±•é˜¶æ®µã€‚

---

## ğŸ“Š ç”Ÿæˆç»Ÿè®¡æ€»ç»“

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| ç ”ç©¶æ–¹å‘æ€»æ•° | {len(directions_data)} |
| å¹³å‡è´¨é‡è¯„åˆ† | {avg_quality:.1f}/10 |
| é«˜è´¨é‡æ–¹å‘(â‰¥8åˆ†) | {high_quality_count} |
| ä¸­ç­‰è´¨é‡(6-8åˆ†) | {medium_quality_count} |
| å¾…ä¼˜åŒ–(<6åˆ†) | {low_quality_count} |
| æ€»å­—æ•° | {total_words:,} |
| ç”Ÿæˆæ—¶é—´ | {datetime.now().strftime('%Y-%m-%d %H:%M:%S')} |

---

**ğŸ¯ è¿™æ˜¯å®Œæ•´çš„9éƒ¨åˆ†æ¡†æ¶ç»¼åˆæŠ¥å‘Šï¼Œè§£å†³äº†åŸæœ‰åªåŒ…å«20ä¸ªæ–¹å‘è€Œç¼ºå°‘ç»¼åˆåˆ†æçš„é—®é¢˜ã€‚**

*é€šè¿‡è‡ªåŠ¨åŒ–ç¬¬ä¸‰æ­¥éª¤æ‰§è¡Œï¼ŒæˆåŠŸç”Ÿæˆäº†åŒ…å«æ‰§è¡Œæ‘˜è¦ã€å‰è¨€ã€æœºåˆ¶åˆ†æã€ç°çŠ¶åˆ†æã€ç ”ç©¶æ–¹å‘ã€åˆ›æ–°åˆ†æã€å®æ–½å»ºè®®ã€é£é™©è¯„ä¼°å’Œæ€»ç»“å±•æœ›çš„å®Œæ•´ç ”ç©¶æŠ¥å‘Šã€‚*
"""
    
    return report

def main():
    """ä¸»å‡½æ•°ï¼šè‡ªåŠ¨æ‰§è¡Œç¬¬ä¸‰æ­¥éª¤"""
    print("ğŸš€ å¼€å§‹è‡ªåŠ¨æ‰§è¡Œç¬¬ä¸‰æ­¥éª¤ï¼šç”Ÿæˆå®Œæ•´çš„9éƒ¨åˆ†ç»¼åˆæŠ¥å‘Š")
    
    # 1. æ‰¾åˆ°æœ€æ–°çš„20ä¸ªæ–¹å‘æ–‡ä»¶
    batch_dir = Path("outputs/batch_directions")
    latest_file = None
    latest_time = None
    
    for file in batch_dir.glob("complete_report_*.md"):
        if latest_time is None or file.stat().st_mtime > latest_time:
            latest_time = file.stat().st_mtime
            latest_file = file
    
    if not latest_file:
        print("âŒ æœªæ‰¾åˆ°20ä¸ªæ–¹å‘çš„å®Œæ•´æŠ¥å‘Šæ–‡ä»¶")
        return
    
    print(f"ğŸ“ æ‰¾åˆ°æœ€æ–°çš„æ–¹å‘æ–‡ä»¶: {latest_file}")
    
    # 2. è§£æ20ä¸ªç ”ç©¶æ–¹å‘
    directions_data = parse_20_directions_from_file(latest_file)
    print(f"âœ… æˆåŠŸè§£æ {len(directions_data)} ä¸ªç ”ç©¶æ–¹å‘")
    
    # 3. ç”Ÿæˆ9éƒ¨åˆ†ç»¼åˆæŠ¥å‘Š
    comprehensive_report = generate_comprehensive_report(directions_data)
    
    # 4. ä¿å­˜åˆ°complete_reportsç›®å½•
    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
    output_dir = Path("outputs/complete_reports")
    output_dir.mkdir(exist_ok=True)
    
    output_file = output_dir / f"comprehensive_9parts_report_{timestamp}.md"
    
    with open(output_file, 'w', encoding='utf-8') as f:
        f.write(comprehensive_report)
    
    print(f"âœ… 9éƒ¨åˆ†ç»¼åˆæŠ¥å‘Šå·²ç”Ÿæˆ: {output_file}")
    print(f"ğŸ“Š æŠ¥å‘ŠåŒ…å«: {len(comprehensive_report):,} å­—ç¬¦")
    print("ğŸ¯ ç¬¬ä¸‰æ­¥éª¤è‡ªåŠ¨æ‰§è¡Œå®Œæˆï¼")

if __name__ == "__main__":
    main() 